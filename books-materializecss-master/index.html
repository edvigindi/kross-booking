<!DOCTYPE html>
<html>
  <head>
  	<meta charset="utf-8">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="css/custom.css"  media="screen,projection"/>
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script src="https://kit.fontawesome.com/9e4074d84f.js" crossorigin="anonymous"></script>
    <script src="http://twitter.github.com/hogan.js/builds/3.0.1/hogan-3.0.1.js"></script>
  </head>
  <body>
    <header>
	      <nav class="nav-extended">
	      	    <div class="nav-wrapper">
		          <a href="#" class="brand-logo"><img src="images/logo.png"></a>
		          <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
		          <ul id="nav-mobile" class="right hide-on-med-and-down">
		            <li><a href="#">Логин</a></li>
		            <li><a href="#">Выход</a></li>
		          </ul>
		        </div>
		        <div class="nav-content col hide-on-small-only m3 l2">
		          <ul class="tabs section table-of-contents">
		            <li class="tab"><a href="#test1">Главная</a></li>
		            <li class="tab"><a href="#test2">Поиск книги</a></li>
		            <li class="tab"><a href="#test3">Мои предложения</a></li>
		            <li class="tab"><a href="#test4">Контакты</a></li>
		          </ul>
		        </div>
	      </nav>
	      <ul class="sidenav" id="mobile-demo">
	        <li><a href="sass.html">Sass</a></li>
	        <li><a href="badges.html">Components</a></li>
	        <li><a href="collapsible.html">JavaScript</a></li>
	      </ul>
    </header>
      <section id="test1" class="section scrollspy">
        <div class="container">
          <div class="row">
            <div class="col s12 m5">
              <h5 class="right-align caption">Домашняя библиотека -</h5>
            </div>
            <div class="col s12 m7">
              <h5 class="left-align description">сообщество истинных ценителей литературы</h5>
            </div>
          </div>
          <div class="row">
            <div class="col s12 m7 offset-m5">
              <h5 class="left-align description">Здесь  вы можете найти труд по душе  или поделиться книгой с другими читателями</h5>
            </div>
          </div>
          </div>
        <span class="scroll-down-buton"><i class="fas fa-arrow-alt-circle-down fa-5x"></i></span>
      </section>
      <section id="test2" class="section scrollspy">
        <div id="contenedor" class="container"></div>
        <script id="listBooksScript" type="text/x-hogan-template">
              <div class="col s12 m6 l4 xl3">
                <div class="card">
                  <div class="card-image">
                    <a href="#">
                       <img class="image s12 m6 l4 xl3" src="{{cover}}" alt="{{title}}" />
                    </a>
                  </div>
                  <div class="card-content">
                    <a href="#">
                     <span class="card-title z-depth-2">{{name}}</span>
                    </a>
                  </div>
                </div>
             </div>
        </script>
        </section>
      <section id="test3" class="section scrollspy">
        <div class="inform-title">введите информацию о новой книге</div>
          <div class="row for-form">
            <div class="input-field col s4">
              <i class="material-icons prefix">mode_edit</i>
              <input placeholder="название" id="name" type="text" class="validate">
            </div>
            <div class="input-field col s4">
              <i class="material-icons prefix">mode_edit</i>
              <input placeholder="автор" id="author" type="text" class="validate">
            </div>
            <form action="#" class="col s4">
                <label>
                  <input class="category" name="group1" type="radio" checked />
                  <span>дарение</span>
                </label>
                <label>
                  <input class="category" name="group1" type="radio" />
                  <span>временная передача</span>
                </label>
            </form>
          </div>
          <div class="row for-form">
            <div class="input-field col s4" id="select-country">
              <select>
                <option value=""  disabled selected>выберите страну</option>
                <option value="1">Украина</option>
                <option value="2">Россия</option>
                <option value="3">Белоруссия</option>
              </select>
            </div>
            <div class="input-field col s4">
              <i class="material-icons prefix">mode_edit</i>
              <input placeholder="город" id="town" type="text" class="validate">
            </div>
            <div class="input-field col s4">
              <i class="material-icons prefix">phone</i>
              <input id="icon_telephone" type="tel" class="validate">
            </div>
          </div>
          <div class="row for-form">
            <div class="input-field col s4">
              <i class="material-icons prefix">email</i>
              <input id="icon_mail" type="email" class="validate">
              <label for="icon_mail">email</label>
            </div>
            <form action="#" class="col s4">
              <div class="file-field input-field">
                <div class="btn">
                  <span>изображение</span>
                  <input type="file">
                </div>
                <div class="file-path-wrapper">
                  <input class="file-path validate" type="text">
                </div>
              </div>
            </form>
            <form class="col s4">
              <div class="row">
                <div class="input-field col s12">
                  <textarea id="textarea2" class="materialize-textarea" data-length="120"></textarea>
                  <label for="textarea2">примечания</label>
                </div>
              </div>
            </form>
          </div>
      </section>
      <section id="test4" class="section scrollspy">4Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloremque assumenda maxime quo similique deserunt possimus nostrum eveniet et excepturi. Assumenda veniam consequuntur eveniet animi quidem eaque necessitatibus voluptas. Pariatur, veritatis.</section>
    <footer class="page-footer">
      <div class="container">
        <div class="row">
          <div class="col l6 s12">
            <h5 class="white-text">контакты</h5>
            <p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
          </div>
          <div class="col l4 offset-l2 s12 socials-col">
            <ul>
              <li><a class="grey-text text-lighten-3" href="#!"><i class="fab fa-telegram fa-2x"></i></a></li>
              <li><a class="grey-text text-lighten-3" href="#!"><i class="fab fa-vk fa-2x"></i></a></li>
              <li><a class="grey-text text-lighten-3" href="#!"><i class="fab fa-skype fa-2x"></i></a></li>
              <li><a class="grey-text text-lighten-3" href="#!"><i class="fab fa-whatsapp fa-2x"></i></a></li>
              <li><a class="grey-text text-lighten-3" href="#!"><i class="fab fa-facebook fa-2x"></i></a></li>
              <li><a class="grey-text text-lighten-3" href="#!"><i class="fab fa-instagram fa-2x"></i></a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        <div class="container">
          © 2019 Copyright Text
        </div>
      </div>
    </footer>
    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script>
          // const cont = document.getElementById("contenedor");
          const $cont = $('#contenedor');

          var windowWidth = $(window).width();
          var offerLimitDefault = 2;
          if(windowWidth > 1200){
            offerLimitDefault = 3;
          }
          var offerLimit = offerLimitDefault;
          // console.log($('#contenedor'));
          $.getJSON( "https://jsonplaceholder.typicode.com/posts", function( data ){

                var fetchedCount = data.length;
                var offerCounter = 0;

                if(fetchedCount > 0){
                  if(offerCounter == 0 && fetchedCount > 0){
                    $('#contenedor').html('');
                  }
                  offerCounter += fetchedCount;
                  var offerCounterTail = offerCounter % offerLimitDefault;
                  if(offerCounterTail != 0 && offerLimit == offerLimitDefault){
                    
                    offerLimit += offerLimitDefault - offerCounterTail;
                    
                  } else if(offerLimit != offerLimitDefault) {
                    
                    offerLimit = offerLimitDefault;
                  }
                }

                var newData = data.map((post) => {
                  return {
                    title: post.title.substring(0,25) + "...",
                    name: post.body.substring(0,50) + "...",
                    cover: "https://picsum.photos/id/" + post.id + "/500/500"
                  };
                });

                // v2
                // console.log(newData);
                /* data = {books: newData};
                console.log(data);
                const source = document.getElementById("listBooksScript").innerHTML;
                const template = Hogan.compile(source);
                const output = template.render(data);
                cont.innerHTML = output; */

                // v3
                newData.forEach(function(item, i, newData) {

                  const source = document.getElementById("listBooksScript").innerHTML;
                  const template = Hogan.compile(source);
                  var $offerGridRows = $cont.children();
                  if($offerGridRows.length == 0
                          || $offerGridRows.last().children().length == offerLimitDefault){
                        $cont.append('<div class="row"></div>');
                        $offerGridRows = $cont.children();
                  }
                  $offerGridRows.last().append(template.render(item));
                });
            });

          /*const data = {
              books: [{
                title: "книга1",
                name: "тонкое искусство пофигизма",
                cover: "images/book1.jpg"
              }, {
                title: "книга2",
                name: "неизвестная книга",
                cover: "images/library.png"
              }, {
                title: "книга3",
                name: "людина розумна",
                cover: "images/book2.jpg"
              }, {
                title: "книга4",
                name: "неизвестная книга",
                cover: "images/library.png"
              }]
            },
            source = document.getElementById("listBooksScript").innerHTML,
            template = Hogan.compile(source),
            output = template.render(data);
            console.log(output);
            cont.innerHTML=output; */
        </script>
    <!-- <script type="text/javascript" src="js/custom.js"></script> -->
  </body>
</html>
